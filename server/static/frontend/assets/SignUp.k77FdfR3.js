import{n as A,l as L,s as U,_ as y,b as x,x as F,f as T,q as W,j as e,I as R,g as _,T as w,t as C,k as z,z as N,A as $,L as q,C as b,D as h,J as D,K as M,O,E as k,F as B,G}from"./main.CIrNMdex.js";import{C as H,l as J,M as P,L as K}from"./logo.CS_3yoji.js";import{G as l}from"./Grid.DstGXmKc.js";function V(n){return L("MuiInputAdornment",n)}const S=A("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var E;const Q=["children","className","component","disablePointerEvents","disableTypography","position","variant"],X=(n,t)=>{const{ownerState:s}=n;return[t.root,t[`position${C(s.position)}`],s.disablePointerEvents===!0&&t.disablePointerEvents,t[s.variant]]},Y=n=>{const{classes:t,disablePointerEvents:s,hiddenLabel:d,position:u,size:p,variant:f}=n,c={root:["root",s&&"disablePointerEvents",u&&`position${C(u)}`,f,d&&"hiddenLabel",p&&`size${C(p)}`]};return z(c,V,t)},Z=U("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:X})(({theme:n,ownerState:t})=>y({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(n.vars||n).palette.action.active},t.variant==="filled"&&{[`&.${S.positionStart}&:not(.${S.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),ee=x.forwardRef(function(t,s){const d=F({props:t,name:"MuiInputAdornment"}),{children:u,className:p,component:f="div",disablePointerEvents:c=!1,disableTypography:j=!1,position:m,variant:g}=d,v=T(d,Q),a=W()||{};let o=g;g&&a.variant,a&&!o&&(o=a.variant);const i=y({},d,{hiddenLabel:a.hiddenLabel,size:a.size,disablePointerEvents:c,position:m,variant:o}),r=Y(i);return e.jsx(R.Provider,{value:null,children:e.jsx(Z,y({as:f,ownerState:i,className:_(r.root,p),ref:s},v,{children:typeof u=="string"&&!j?e.jsx(w,{color:"text.secondary",children:u}):e.jsxs(x.Fragment,{children:[m==="start"?E||(E=e.jsx("span",{className:"notranslate",children:"â€‹"})):null,u]})}))})});function ae(){const[n,t]=x.useState("student"),[s,d]=x.useState(null),[u,p]=x.useState(""),[f,c]=x.useState(null),j=N(),m=$(),g=a=>{const o=a.target.files[0];if(o)if(o.type.startsWith("image/")){d(o),c(null);const i=new FileReader;i.onload=()=>{const r=i.result;p(r)},i.readAsDataURL(o)}else d(null),c("Invalid file type. Please select an image file.");else d(null),c(null)},v=async a=>{a.preventDefault();const o=new FormData(a.currentTarget),i=await fetch(`${B}sign-up/`,{method:"POST",body:o});if(i.status===200||i.status===201){const r=await i.json();await G(r.user,r.token),m.show("Sign up successful",{type:"success"}),j("/")}else try{const r=await i.json();typeof r=="object"?Object.keys(r).forEach(I=>{m.error(`${I}: ${r[I]}`)}):m.error(r)}catch{m.error("Something went wrong")}};return e.jsx(q,{children:e.jsx(H,{component:"main",maxWidth:"xs",children:e.jsxs(b,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(b,{component:"img",src:J,alt:"Brand",width:"5rem",sx:{borderRadius:2}}),e.jsx(w,{component:"h1",variant:"h5",children:"Sign up"}),e.jsxs(b,{component:"form",noValidate:!0,onSubmit:v,sx:{mt:3},children:[e.jsxs(l,{container:!0,spacing:2,sx:{maxWidth:"444px"},children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(h,{required:!0,fullWidth:!0,name:"type",label:"User Type",select:!0,SelectProps:{sx:{height:"45px",minHeight:"100%"}},value:n,onChange:a=>t(a.target.value),children:[e.jsx(P,{value:"student",children:"Student"}),e.jsx(P,{value:"instructor",children:"Instructor"})]})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(h,{autoComplete:"given-name",name:"first_name",required:!0,fullWidth:!0,id:"first_name",label:"First Name",autoFocus:!0})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(h,{required:!0,fullWidth:!0,label:"Last Name",name:"last_name",autoComplete:"family-name"})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{required:!0,fullWidth:!0,label:n==="student"?"Matriculation Number":"Username",name:"username"})}),e.jsx(l,{item:!0,xs:12,children:e.jsxs(D,{sx:{width:"100%"},variant:"outlined",children:[e.jsx(M,{htmlFor:"outlined-adornment-password",children:"Passport"}),e.jsx(w,{sx:{position:"absolute",p:2},variant:"caption",children:s==null?void 0:s.name}),e.jsx(O,{id:"outlined-adornment-password",type:"file",label:"Passport",name:"passport",inputProps:{style:{opacity:0,zIndex:1}},onChange:g,endAdornment:e.jsx(ee,{position:"end",children:e.jsx("img",{alt:s==null?void 0:s.name,src:u,style:{width:30,aspectRatio:1,objectFit:"cover"}})})})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{required:!0,fullWidth:!0,name:"address",label:"Address",autoComplete:"address"})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(h,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})})]}),e.jsx(k,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,color:"#fff"},children:"Sign Up"}),e.jsx(l,{container:!0,justifyContent:"flex-end",children:e.jsx(l,{item:!0,children:e.jsx(K,{href:"sign-in",variant:"body2",children:"Already have an account? Sign in"})})})]})]})})})}export{ae as default};
